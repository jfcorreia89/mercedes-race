<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
  <title>Mercedes Grand Prix</title>
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="style.css" />
</head>
<body>

<!-- ── Inline SVG Symbol Library ─────────────────────────────────────────── -->
<svg style="display:none" aria-hidden="true">
  <defs>

    <!-- Mercedes Three-Pointed Star -->
    <symbol id="icon-star" viewBox="0 0 60 60">
      <circle cx="30" cy="30" r="28" fill="none" stroke="currentColor" stroke-width="2"/>
      <path fill="currentColor" d="
        M30,4 L33.5,26 L30,30 L26.5,26 Z
        M30,30 L50,43.7 L47,40 L30,30 Z
        M30,30 L10,43.7 L13,40 L30,30 Z
      "/>
    </symbol>

    <!-- Reusable wheel (3-spoke alloy) -->
    <symbol id="wheel" viewBox="-8 -8 16 16">
      <circle r="7.5" fill="#111"/>
      <circle r="6" fill="#222"/>
      <circle r="4.8" fill="#2e2e2e"/>
      <path d="M0,-4 L0,4 M-3.46,-2 L3.46,2 M3.46,-2 L-3.46,2"
            stroke="#111" stroke-width="2.2" fill="none"/>
      <circle r="1.8" fill="#4a4a4a"/>
      <circle r="0.9" fill="#777"/>
    </symbol>

    <!-- S-Class: long luxury sedan, 3-box proportions -->
    <symbol id="car-s-class" viewBox="0 0 120 50">
      <ellipse cx="60" cy="48.5" rx="52" ry="2" fill="rgba(0,0,0,0.5)"/>
      <!-- Body -->
      <path fill="currentColor" d="
        M6,41 L6,34
        C7,24 17,20 27,18
        L48,14 L78,14
        C93,14 103,20 112,28
        L114,35 L114,41
        C103,43 90,44 80,44
        C76,44 73,41 70,39
        L50,39
        C47,44 35,44 22,44
        C13,44 6,42 6,41 Z
      "/>
      <!-- Body highlight -->
      <path fill="rgba(255,255,255,0.06)" d="
        M27,18 L48,14 L78,14
        C90,14 101,19 109,26
        L102,21 C93,15 81,13 68,13
        L50,13 C39,13 28,17 21,22 Z
      "/>
      <!-- Glass -->
      <path fill="rgba(160,210,255,0.22)" d="
        M30,18 C38,15 47,14 56,14
        L79,14 C91,14 101,20 109,27
        L92,31 L36,31
        C30,27 28,23 30,18 Z
      "/>
      <!-- B-pillar -->
      <rect x="63" y="14" width="3.5" height="17" rx="1.5" fill="rgba(0,0,0,0.4)"/>
      <!-- C-pillar shading -->
      <path fill="rgba(0,0,0,0.2)" d="M88,14 L109,27 L92,31 L90,14 Z"/>
      <!-- DRL headlight strip -->
      <rect x="8" y="28" width="9" height="2.5" rx="1.25" fill="rgba(255,255,210,0.9)"/>
      <!-- Lower amber indicator -->
      <rect x="8" y="31" width="5" height="1.5" rx="0.75" fill="rgba(255,180,80,0.8)"/>
      <!-- Taillight -->
      <rect x="107" y="26" width="5" height="8" rx="1.5" fill="rgba(255,50,50,0.85)"/>
      <!-- Wheel well shadows -->
      <ellipse cx="28" cy="44" rx="11" ry="3.5" fill="rgba(0,0,0,0.55)"/>
      <ellipse cx="90" cy="44" rx="11" ry="3.5" fill="rgba(0,0,0,0.55)"/>
      <!-- Wheels -->
      <use href="#wheel" x="20" y="36" width="16" height="16"/>
      <use href="#wheel" x="82" y="36" width="16" height="16"/>
    </symbol>

    <!-- AMG GT: long aggressive hood, fastback roofline -->
    <symbol id="car-amg-gt" viewBox="0 0 120 50">
      <ellipse cx="60" cy="48.5" rx="51" ry="2" fill="rgba(0,0,0,0.5)"/>
      <!-- Body -->
      <path fill="currentColor" d="
        M5,41 L5,36
        C6,30 12,26 20,23
        C26,21 38,19 52,18
        L60,17 C64,15 70,14 78,14
        L88,14
        C98,15 105,20 112,27
        L114,35 L114,41
        C103,44 88,44 78,44
        C74,44 71,41 68,39
        L40,39
        C37,44 26,44 14,44
        C8,44 5,42 5,41 Z
      "/>
      <!-- Hood power bulge shadow -->
      <path fill="rgba(0,0,0,0.18)" d="M12,30 L52,18 L58,17 L52,21 L12,33 Z"/>
      <!-- Body highlight -->
      <path fill="rgba(255,255,255,0.07)" d="
        M54,18 C60,16 68,14 78,14 L88,14
        C98,15 104,19 111,26
        L105,22 C97,16 88,14 76,14
        L68,14 C62,14 57,16 54,18 Z
      "/>
      <!-- Glass (raked fastback) -->
      <path fill="rgba(160,210,255,0.22)" d="
        M60,17 C64,15 70,14 78,14 L88,14
        C97,15 104,20 112,27
        L93,31 L50,31
        C52,25 56,21 60,17 Z
      "/>
      <!-- Raked A-pillar shadow -->
      <path fill="rgba(0,0,0,0.25)" d="M50,31 L60,17 L64,14 L60,17 L50,31 Z"/>
      <!-- Fastback C-pillar -->
      <path fill="rgba(0,0,0,0.3)" d="M88,14 L112,27 L93,31 L90,14 Z"/>
      <!-- Low aggressive headlight -->
      <rect x="6" y="31" width="7" height="2.5" rx="1.25" fill="rgba(255,255,210,0.9)"/>
      <!-- Taillight (tall) -->
      <rect x="109" y="27" width="4" height="10" rx="1" fill="rgba(255,50,50,0.85)"/>
      <!-- Side skirt accent line -->
      <rect x="5" y="38" width="109" height="2.5" rx="0" fill="rgba(0,0,0,0.3)"/>
      <!-- Wheel well shadows -->
      <ellipse cx="26" cy="44" rx="11" ry="3.5" fill="rgba(0,0,0,0.55)"/>
      <ellipse cx="86" cy="44" rx="11" ry="3.5" fill="rgba(0,0,0,0.55)"/>
      <!-- Wheels -->
      <use href="#wheel" x="18" y="36" width="16" height="16"/>
      <use href="#wheel" x="78" y="36" width="16" height="16"/>
    </symbol>

    <!-- G-Class: tall boxy off-roader -->
    <symbol id="car-g-class" viewBox="0 0 120 50">
      <ellipse cx="60" cy="48.5" rx="52" ry="2" fill="rgba(0,0,0,0.5)"/>
      <!-- Body (very boxy) -->
      <path fill="currentColor" d="
        M8,42 L8,9
        C8,8 9,8 12,8
        L108,8 C111,8 112,9 112,10
        L112,42
        C102,45 88,45 79,45
        C74,45 71,42 69,40
        L51,40
        C48,45 32,45 20,45
        C14,45 8,44 8,42 Z
      "/>
      <!-- Windshield (near-vertical) -->
      <path fill="rgba(160,210,255,0.22)" d="M16,8 L16,31 L46,31 L46,8 Z"/>
      <!-- Rear window -->
      <path fill="rgba(160,210,255,0.22)" d="M74,8 L74,31 L104,31 L104,8 Z"/>
      <!-- Centre pillar (thick) -->
      <rect x="46" y="8" width="28" height="23" fill="rgba(0,0,0,0.48)"/>
      <!-- Roof rack bar -->
      <rect x="12" y="6.5" width="96" height="2.5" rx="1" fill="rgba(60,60,60,0.9)"/>
      <!-- Roof rack cross-members -->
      <rect x="25" y="5" width="5" height="4" rx="0.5" fill="rgba(70,70,70,0.9)"/>
      <rect x="50" y="5" width="5" height="4" rx="0.5" fill="rgba(70,70,70,0.9)"/>
      <rect x="75" y="5" width="5" height="4" rx="0.5" fill="rgba(70,70,70,0.9)"/>
      <!-- Iconic round headlights -->
      <circle cx="11" cy="20" r="5" fill="rgba(0,0,0,0.65)"/>
      <circle cx="11" cy="20" r="4" fill="rgba(255,255,210,0.9)"/>
      <circle cx="11" cy="20" r="1.5" fill="rgba(255,255,255,0.6)"/>
      <!-- Taillight strip -->
      <rect x="109" y="13" width="3" height="14" rx="1" fill="rgba(255,50,50,0.85)"/>
      <!-- Spare wheel on rear -->
      <circle cx="109" cy="32" r="6" fill="rgba(0,0,0,0.35)" stroke="rgba(100,100,100,0.5)" stroke-width="1.5"/>
      <circle cx="109" cy="32" r="3.5" fill="rgba(40,40,40,0.7)"/>
      <circle cx="109" cy="32" r="1.2" fill="rgba(80,80,80,0.8)"/>
      <!-- Wheel well shadows -->
      <ellipse cx="32" cy="44" rx="12" ry="3.5" fill="rgba(0,0,0,0.55)"/>
      <ellipse cx="88" cy="44" rx="12" ry="3.5" fill="rgba(0,0,0,0.55)"/>
      <!-- Wheels (larger off-road tyres) -->
      <use href="#wheel" x="23" y="35" width="18" height="18"/>
      <use href="#wheel" x="79" y="35" width="18" height="18"/>
    </symbol>

    <!-- C-Class: compact sporting sedan -->
    <symbol id="car-c-class" viewBox="0 0 120 50">
      <ellipse cx="60" cy="48.5" rx="50" ry="2" fill="rgba(0,0,0,0.5)"/>
      <!-- Body (sportier, shorter than S-Class) -->
      <path fill="currentColor" d="
        M8,41 L8,34
        C9,24 20,20 30,18
        L50,14 L76,14
        C90,14 100,21 109,29
        L111,36 L111,41
        C101,44 88,44 79,44
        C75,44 72,41 70,39
        L50,39
        C47,44 36,44 24,44
        C15,44 8,42 8,41 Z
      "/>
      <!-- Body highlight -->
      <path fill="rgba(255,255,255,0.06)" d="
        M30,18 L50,14 L76,14
        C89,14 99,20 108,28
        L101,23 C92,16 80,14 67,14
        L52,14 C40,14 31,17 24,22 Z
      "/>
      <!-- Glass -->
      <path fill="rgba(160,210,255,0.22)" d="
        M32,18 C40,15 49,14 57,14
        L77,14 C89,14 99,21 108,29
        L90,32 L38,32
        C32,28 30,23 32,18 Z
      "/>
      <!-- B-pillar -->
      <rect x="62" y="14" width="3" height="18" rx="1.5" fill="rgba(0,0,0,0.4)"/>
      <!-- C-pillar shading -->
      <path fill="rgba(0,0,0,0.2)" d="M88,14 L108,29 L90,32 L88,14 Z"/>
      <!-- Sport line accent -->
      <path fill="none" stroke="rgba(255,255,255,0.1)" stroke-width="1.5" d="M8,37 L111,37"/>
      <!-- DRL headlight -->
      <rect x="9" y="28" width="7" height="2.5" rx="1.25" fill="rgba(255,255,210,0.9)"/>
      <!-- Taillight -->
      <rect x="106" y="27" width="4" height="7" rx="1" fill="rgba(255,50,50,0.85)"/>
      <!-- Wheel well shadows -->
      <ellipse cx="30" cy="43" rx="10" ry="3.5" fill="rgba(0,0,0,0.55)"/>
      <ellipse cx="88" cy="43" rx="10" ry="3.5" fill="rgba(0,0,0,0.55)"/>
      <!-- Wheels -->
      <use href="#wheel" x="22" y="35" width="16" height="16"/>
      <use href="#wheel" x="80" y="35" width="16" height="16"/>
    </symbol>

    <!-- EQS: smooth one-bow electric fastback -->
    <symbol id="car-eqs" viewBox="0 0 120 50">
      <ellipse cx="60" cy="48.5" rx="52" ry="2" fill="rgba(0,0,0,0.5)"/>
      <!-- Body (very smooth one-bow shape) -->
      <path fill="currentColor" d="
        M6,41 L7,34
        C9,24 22,18 36,15
        L55,12 L75,12
        C92,12 104,19 112,28
        L115,36 L115,41
        C105,44 91,44 81,44
        C77,44 74,41 71,39
        L49,39
        C46,44 29,44 17,44
        C10,44 6,42 6,41 Z
      "/>
      <!-- Smooth body highlight (aero) -->
      <path fill="rgba(255,255,255,0.07)" d="
        M36,15 L55,12 L75,12
        C92,12 104,19 112,28
        L104,21 C96,14 83,11 68,11
        L54,11 C44,11 35,13 28,17 Z
      "/>
      <!-- Large flowing glass (one-bow) -->
      <path fill="rgba(160,210,255,0.25)" d="
        M26,18 C34,14 48,12 60,12
        L76,12 C92,12 103,19 111,28
        L93,32 L30,32
        C25,27 24,23 26,18 Z
      "/>
      <!-- Gently raked A-pillar shadow -->
      <path fill="rgba(0,0,0,0.2)" d="M30,32 L36,18 L40,12 L37,15 Z"/>
      <!-- Fastback C-pillar -->
      <path fill="rgba(0,0,0,0.3)" d="M90,12 L111,28 L93,32 L90,12 Z"/>
      <!-- Flush LED headlight (thin) -->
      <rect x="8" y="27.5" width="10" height="2" rx="1" fill="rgba(255,255,210,0.95)"/>
      <!-- Below-light styling crease -->
      <rect x="8" y="30" width="6" height="1" rx="0.5" fill="rgba(255,255,255,0.12)"/>
      <!-- Flush LED taillight (thin) -->
      <rect x="107" y="27" width="7" height="2" rx="1" fill="rgba(255,50,50,0.9)"/>
      <!-- Closed EV front (no grille) -->
      <rect x="8" y="32" width="5" height="4" rx="1" fill="rgba(0,0,0,0.5)"/>
      <!-- EV charge port (blue accent) -->
      <rect x="112" y="22" width="2.5" height="4" rx="0.5" fill="rgba(80,190,255,0.8)"/>
      <!-- Wheel well shadows -->
      <ellipse cx="28" cy="43" rx="12" ry="3.5" fill="rgba(0,0,0,0.55)"/>
      <ellipse cx="90" cy="43" rx="12" ry="3.5" fill="rgba(0,0,0,0.55)"/>
      <!-- Wheels (large diameter EV style) -->
      <use href="#wheel" x="19" y="34" width="18" height="18"/>
      <use href="#wheel" x="81" y="34" width="18" height="18"/>
    </symbol>

    <!-- GLE: tall rounded luxury SUV -->
    <symbol id="car-gle" viewBox="0 0 120 50">
      <ellipse cx="60" cy="48.5" rx="51" ry="2" fill="rgba(0,0,0,0.5)"/>
      <!-- Body (tall, rounded SUV) -->
      <path fill="currentColor" d="
        M8,41 L8,26
        C9,16 21,11 34,10
        L55,9 L72,9
        C88,9 100,14 109,22
        L112,30 L112,41
        C102,45 88,45 79,45
        C75,45 72,42 70,40
        L50,40
        C47,45 34,45 22,45
        C13,45 8,43 8,41 Z
      "/>
      <!-- Body highlight -->
      <path fill="rgba(255,255,255,0.06)" d="
        M34,10 L55,9 L72,9
        C88,9 100,14 109,22
        L103,17 C94,10 83,8 68,8
        L54,8 C44,8 35,10 28,14 Z
      "/>
      <!-- Glass (taller SUV greenhouse) -->
      <path fill="rgba(160,210,255,0.22)" d="
        M30,12 C40,9 52,9 62,9
        L73,9 C87,9 99,14 108,22
        L92,27 L36,27
        C29,22 28,17 30,12 Z
      "/>
      <!-- Thick B-pillar (SUV) -->
      <rect x="64" y="9" width="5" height="18" rx="2" fill="rgba(0,0,0,0.45)"/>
      <!-- C-pillar shading -->
      <path fill="rgba(0,0,0,0.25)" d="M90,9 L108,22 L92,27 L89,9 Z"/>
      <!-- Chrome roof rails -->
      <rect x="20" y="8" width="80" height="2.5" rx="1" fill="rgba(90,90,90,0.9)"/>
      <!-- Running board -->
      <rect x="8" y="37" width="104" height="3.5" rx="1.5" fill="rgba(0,0,0,0.38)"/>
      <!-- Angular headlight -->
      <rect x="9" y="20" width="8" height="3" rx="1" fill="rgba(255,255,210,0.9)"/>
      <!-- Lower fog light -->
      <rect x="9" y="24" width="5" height="2" rx="1" fill="rgba(255,220,180,0.7)"/>
      <!-- Taillight (tall) -->
      <rect x="106" y="19" width="5" height="10" rx="1.5" fill="rgba(255,50,50,0.85)"/>
      <!-- Wheel well shadows -->
      <ellipse cx="32" cy="44" rx="12" ry="3.5" fill="rgba(0,0,0,0.55)"/>
      <ellipse cx="88" cy="44" rx="12" ry="3.5" fill="rgba(0,0,0,0.55)"/>
      <!-- Wheels (larger SUV diameter) -->
      <use href="#wheel" x="23" y="35" width="18" height="18"/>
      <use href="#wheel" x="79" y="35" width="18" height="18"/>
    </symbol>

  </defs>
</svg>

<!-- ── Screen: Landing ──────────────────────────────────────────────────────── -->
<section id="screen-landing" class="screen active">
  <div class="landing-inner">
    <header class="brand-header">
      <svg class="brand-star" viewBox="0 0 60 60" aria-label="Mercedes star">
        <use href="#icon-star"/>
      </svg>
      <div class="brand-text">
        <span class="brand-name">MERCEDES</span>
        <span class="brand-sub">GRAND PRIX</span>
      </div>
    </header>

    <div class="card landing-card">
      <div class="field-group">
        <label for="input-name" class="field-label">YOUR NAME</label>
        <input id="input-name" type="text" class="field-input" placeholder="Enter your name" maxlength="20" autocomplete="off" />
      </div>

      <div class="field-group">
        <label class="field-label">CHOOSE YOUR CAR</label>
        <div class="car-grid" id="car-grid">
          <button class="car-option" data-model="s-class" type="button">
            <svg viewBox="0 0 120 50" class="car-option-svg"><use href="#car-s-class"/></svg>
            <span class="car-option-name">S-Class</span>
          </button>
          <button class="car-option" data-model="amg-gt" type="button">
            <svg viewBox="0 0 120 50" class="car-option-svg"><use href="#car-amg-gt"/></svg>
            <span class="car-option-name">AMG GT</span>
          </button>
          <button class="car-option" data-model="g-class" type="button">
            <svg viewBox="0 0 120 50" class="car-option-svg"><use href="#car-g-class"/></svg>
            <span class="car-option-name">G-Class</span>
          </button>
          <button class="car-option" data-model="c-class" type="button">
            <svg viewBox="0 0 120 50" class="car-option-svg"><use href="#car-c-class"/></svg>
            <span class="car-option-name">C-Class</span>
          </button>
          <button class="car-option" data-model="eqs" type="button">
            <svg viewBox="0 0 120 50" class="car-option-svg"><use href="#car-eqs"/></svg>
            <span class="car-option-name">EQS</span>
          </button>
          <button class="car-option" data-model="gle" type="button">
            <svg viewBox="0 0 120 50" class="car-option-svg"><use href="#car-gle"/></svg>
            <span class="car-option-name">GLE</span>
          </button>
        </div>
      </div>

      <div class="landing-actions">
        <button id="btn-create" class="btn btn-primary" type="button" disabled>Create Room</button>
        <button id="btn-show-join" class="btn btn-secondary" type="button" disabled>Join Room</button>
      </div>

      <div id="join-panel" class="join-panel hidden">
        <div class="field-group">
          <label for="input-room-code" class="field-label">ROOM CODE</label>
          <input id="input-room-code" type="text" class="field-input field-input--code" placeholder="XXXXXX" maxlength="6" autocomplete="off" />
        </div>
        <button id="btn-confirm-join" class="btn btn-primary" type="button">Join Race</button>
      </div>

      <p id="landing-error" class="error-msg hidden"></p>
    </div>

    <p class="loading-note" id="loading-note">Connecting to server...</p>
  </div>
</section>

<!-- ── Screen: Lobby ───────────────────────────────────────────────────────── -->
<section id="screen-lobby" class="screen">
  <div class="lobby-inner">
    <header class="lobby-header">
      <svg class="brand-star brand-star--sm" viewBox="0 0 60 60">
        <use href="#icon-star"/>
      </svg>
      <div class="brand-text">
        <span class="brand-name brand-name--sm">MERCEDES GRAND PRIX</span>
      </div>
    </header>

    <div class="lobby-body">
      <div class="card room-code-card">
        <p class="room-code-label">ROOM CODE</p>
        <p class="room-code-display" id="lobby-room-code">------</p>
        <div class="share-row">
          <input id="lobby-share-link" class="share-link-input" readonly />
          <button id="btn-copy-link" class="btn btn-copy" type="button">Copy Link</button>
        </div>
      </div>

      <div class="card players-card">
        <div class="players-card-header">
          <span class="players-title">DRIVERS</span>
          <span class="players-count" id="lobby-player-count">0 / 16</span>
        </div>
        <div class="player-list" id="lobby-player-list"></div>
      </div>
    </div>

    <div class="lobby-footer">
      <button id="btn-start-race" class="btn btn-race hidden" type="button" disabled>
        <svg viewBox="0 0 60 60" class="btn-star-icon"><use href="#icon-star"/></svg>
        Start Race
      </button>
      <p class="lobby-waiting" id="lobby-waiting">Waiting for the host to start the race...</p>
    </div>
  </div>
</section>

<!-- ── Screen: Race ────────────────────────────────────────────────────────── -->
<section id="screen-race" class="screen">
  <div id="countdown-overlay" class="countdown-overlay hidden">
    <span id="countdown-number">3</span>
  </div>

  <div class="race-header">
    <div class="race-header-left">
      <svg viewBox="0 0 60 60" class="race-star"><use href="#icon-star"/></svg>
      <span class="race-driver-name" id="race-driver-name"></span>
    </div>
    <div class="race-header-right">
      <span class="race-click-label">CLICKS</span>
      <span class="race-click-count" id="race-click-count">0</span>
    </div>
  </div>

  <div class="track-container" id="track-container">
    <!-- Lanes injected dynamically -->
  </div>

  <div class="click-zone">
    <p class="ab-instruction">Alternate <kbd>A</kbd> and <kbd>B</kbd> to accelerate</p>
    <div class="ab-buttons">
      <button id="btn-a" class="btn-ab" data-key="a" type="button" aria-label="Press A">
        <span class="btn-ab-key">A</span>
        <span class="btn-ab-hint">next</span>
      </button>
      <div class="ab-divider">
        <svg viewBox="0 0 60 60" class="ab-star"><use href="#icon-star"/></svg>
      </div>
      <button id="btn-b" class="btn-ab" data-key="b" type="button" aria-label="Press B">
        <span class="btn-ab-key">B</span>
        <span class="btn-ab-hint">next</span>
      </button>
    </div>
  </div>
</section>

<!-- ── Screen: Results ─────────────────────────────────────────────────────── -->
<section id="screen-results" class="screen">
  <div class="results-inner">
    <header class="results-header">
      <svg class="brand-star" viewBox="0 0 60 60">
        <use href="#icon-star"/>
      </svg>
      <h1 class="results-title">RACE RESULTS</h1>
    </header>

    <div class="podium-row" id="podium-row">
      <!-- Top 3 injected dynamically -->
    </div>

    <div class="card results-list-card">
      <div class="results-list" id="results-list">
        <!-- Full ranking injected dynamically -->
      </div>
    </div>

    <div class="results-actions">
      <button id="btn-play-again" class="btn btn-race hidden" type="button">
        <svg viewBox="0 0 60 60" class="btn-star-icon"><use href="#icon-star"/></svg>
        Race Again
      </button>
      <p class="results-waiting" id="results-waiting">Waiting for host to start next race...</p>
    </div>
  </div>
</section>

<script src="/socket.io/socket.io.js"></script>
<script src="game.js"></script>
</body>
</html>
